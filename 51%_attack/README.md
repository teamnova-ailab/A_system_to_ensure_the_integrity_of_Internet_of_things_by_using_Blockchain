블록체인 기술의 핵심적인 가치는 탈 중앙화 시스템이다.
#이는 누구나 참여가 가능하며 의사결정 또한 과반수 이상의 합의가 필요하다. 
하지만 어느 집단이나 개인이 시스템 안에서 과반수 이상의 힘을 가지게 된다면 어떻게 될까? 비트코인에서는 이를 ‘51% 공격’이라 한다. 
본 실험에서는 51% 공격을 구현하여 정상적인 사용자들의 거래를 공격했을 때 변화를 확인한다.
4.1. 51% 공격(>50% 공격, 과반수 공격) 실험
 
(그림 6) 비트코인 블록 생성 과정
   (그림 6)은 비트코인의 블록 생성 과정을 순서대로 보여준다.
①: 사용자들간의 거래가 발생하면 거래 내역은 P2P네트워크를 통해 전체 사용자에게 전달된다. 사용자는 전달 받은 거래 내역을 비트코인 코어에 저장한다.
②: 채굴 프로그램은 블록 생성에 필요한 정보 (이전 블록 해시값, 버전, 현재 시간, 거래 내역 리스트, 난이도 값)를 비트코인 코어에 요청한다.
③: 비트코인 코어는 채굴 프로그램에 요청 받은 정보를 전달한다. 
④: 받은 정보와 임의의 값을 더하고 해시 함수를 이용해 해시값을 구한다.
⑤: 난이도 값과 해시값을 비교하여 해시값이 난이도 값보다 크다면 과정 ②부터 다시 실행한다. 해시값이 난이도 값보다 작을 경우 블록을 생성한다.
⑥: 생성한 블록은 비트코인 코어에 전달한다.
⑦: 비트코인 코어에서 전달 받은 새로운 블록을 P2P 네트워크를 통해 다른 사용자들에게 전달한다. 사용자들은 전달 받은 블록을 자신의 블록에 추가하게 된다.
   본 논문에서 악의적인 사용자는 (그림 6)의 비트코인 블록 생성 과정 중 ②의 과정을 조작한다. 이를 통해 악의적인 사용자는 거래 내역을 포함하지 않는 블록을 만들어 정상적인 사용자들에게 정상적인 블록이라 판단하게 하고 동기화 하는 것을 목표로 한다. 이는 비트코인 에서 가장 긴 블록을 정상적인 블록이라 판단하기 때문이다.
 
(그림 7) 블록 구조도
악의적인 사용자는 (그림 7)의 블록 A가 생성된 후 진행된 거래를 조작하기로 한다. 그래서 블록A가 생성된 후 악의적인 사용자는 정상적인 사용자들과 연결을 끊는다. 정상적인 사용자들과 연결을 끊었기에 정상적인 사용자들이 ‘A-C-D’ 순서로 블록을 만들어 전파할 때 악의적인 사용자는 동기화를 하지 않는다. 악의적인 사용자는 조작된 블록을 만들어 정상적인 사용자들보다 블록의 길이가 길어지면 정상적인 사용자들과 연결을 한다. 정상적인 사용자들은 악의적인 사용자의 블록이 더 길기에 정상적인 블록이라 판단하고 동기화를 진행한다.

공격의 진행 순서는 다음과 같다.
ㄱ.	정상적인 사용자들은 [사용자A가 사용자B 에게 1000코인을 준다] 라는 거래를 진행하고 해당 거래가 포함된 블록을 만든다.
ㄴ.	악의적인 사용자는 정상적인 사용자들이 블록을 만들고 있을 때 연결을 끊고 거래 내역을 포함하지 않는 블록을 만든다.
ㄷ.	악의적인 사용자의 블록이 정상적인 사용자들의 블록보다 많아지게 되면 정상적인 사용자들과 연결한다.

4.2. 실험 결과
   정상적인 사용자와 악의적인 사용자는 1146번 블록부터 연결을 끊었다. [사용자A가 사용자B에게 1000 코인을 준다] 라는 거래는 1147번 블록에 들어가 생성 되었다. (그림 8)은 해당 거래가 기록된 트랜잭션이다. 여기서 ‘Transaction ID’는 해당 트랜잭션이 다른 트랜잭션과 구별될 수 있도록 부여된 아이디를 말한다.
 
(그림 8) 거래 트랜잭션
   (그림 9)는 생성된 블록 번호와 저장된 트랜잭션을 빨간색 테두리로 표시하였다. (그림 10)은 블록이 생성된 후 사용가능 금액에 1000 코인이 표시된 사진이다.
 
(그림9) 정상적인 사용자들이 만든 1147번 블록
 
(그림 10) 정상적인 사용자의 잔액
   악의적인 사용자는 정상적인 사용자들보다 블록을 많이 만든 뒤 정상적인 사용자들과 연결하였다. 그러자 정상적인 사용자들의 블록이 악의적인 사용자의 블록으로 대체 되었고 거래 내역이 블록에서 사라지게 되었다. (그림 11)에서 1147번 블록으로 대체되어 기존의 거래가 사라진 모습을 확인할 수 있다. (그림 12)는 기존의 사용가능에 있던 1000코인이 보류된 금액으로 전환된 것을 확인할 수 있다.
 
(그림 11) 악의적인 사용자의 1147번 블록으로 변경
 
(그림 12) 변경된 잔액
